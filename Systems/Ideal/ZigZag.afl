SetBacktestMode( backtestRegularRaw );
SetTradeDelays(0,0,0,0);

PositionSize = -0.1;
Price = Close;
Short = Cover = Buy = Sell = False;

// Set the ZigZag Percentage
Percentage = 10;

Z = Zig(Price,Percentage);

Buy = Z < Ref(Z,1) AND Z < Ref(Z,-1);
Sell = Z > Ref(Z,1) AND Z > Ref(Z,-1);
Short = Z > Ref(Z,1) AND Z > Ref(Z,-1);
Cover = Z < Ref(Z,1) AND Z < Ref(Z,-1);

Buy = ExRem(Buy,Sell);
Sell = ExRem(Sell,Buy);
Short = ExRem(Short,Cover);
Cover = ExRem(Cover,Short);